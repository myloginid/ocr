<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Processing…</title>
    <link rel="stylesheet" href="/static/styles.css" />
    <meta http-equiv="refresh" content="3">
    <style>
      .center { text-align:center; margin-top: 3rem; }
      .spinner {
        width: 48px; height: 48px; border: 4px solid #e3e3e3; border-top-color: #4F46E5;
        border-radius: 50%; margin: 1rem auto; animation: spin 1s linear infinite;
      }
      @keyframes spin { to { transform: rotate(360deg); } }
      .muted { color: #666; }
    </style>
  </head>
  <body>
    <header>
      <h1>Processing your document…</h1>
      <p>The OCR job is running. This page refreshes automatically.</p>
    </header>
    <main>
      <section class="card center">
        <div class="spinner" aria-label="Loading"></div>
        {% if error %}
          <p style="color:#b91c1c; font-weight:600;">An error occurred:</p>
          <pre style="white-space:pre-wrap; text-align:left; margin:1rem auto; max-width:60ch;">{{ error }}</pre>
          <p><a class="button" href="/">Back to upload</a></p>
        {% else %}
          <p class="muted">Job ID: {{ uid }}</p>
          <p class="muted">First run may take 1–2 minutes while models load.</p>
          <p><a class="button" href="/view/{{ uid }}">Refresh now</a></p>
        {% endif %}
      </section>
    </main>
    <script>
      // Fallback JS refresh in case meta refresh is blocked
      setTimeout(() => { location.reload(); }, 3000);
    </script>
  </body>
  </html>

